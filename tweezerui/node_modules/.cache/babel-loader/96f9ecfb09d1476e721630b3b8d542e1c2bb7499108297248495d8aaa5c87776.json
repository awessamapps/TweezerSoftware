{"ast":null,"code":"var _jsxFileName = \"F:\\\\tweezerui\\\\src\\\\components\\\\CameraPreview\\\\CameraPreview.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { Modal, Button, Form } from 'react-bootstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faCog } from '@fortawesome/free-solid-svg-icons';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport { Slide } from 'react-toastify';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst mainServerURL = \"http://10.0.63.153:4000/\";\nconst camServerURLs = {\n  1: \"http://10.0.63.153:4001\",\n  2: \"http://10.0.63.153:4002\"\n};\nfunction CameraPreview() {\n  _s();\n  const [allCameras, setAllCameras] = useState([]);\n  const [canvasSize, setCanvasSize] = useState({\n    width: 0,\n    height: 0\n  });\n  const canvasRef = useRef(null);\n  const [cameras, setCameras] = useState({\n    1: {\n      isPreviewActive: false,\n      isStreaming: false,\n      showModalSettings: false,\n      isSwitchActive: true,\n      formValues: {\n        camId: 'Select Option',\n        folderPath: 'F:/',\n        targetFPS: '10',\n        imageFormat: '',\n        exposureTime: \"10.0\",\n        gain: \"1.0\"\n      },\n      comment: \"Select the camera ID from the dropdown list\",\n      isVirtual: false,\n      fps: 0,\n      rxSpeed: 0\n    },\n    2: {\n      isPreviewActive: false,\n      isStreaming: false,\n      showModalSettings: false,\n      isSwitchActive: true,\n      formValues: {\n        camId: 'Select Option',\n        folderPath: 'F:/',\n        targetFPS: '10',\n        imageFormat: '',\n        exposureTime: \"10.0\",\n        gain: \"1.0\"\n      },\n      comment: \"Select the camera ID from the dropdown list\",\n      isVirtual: false,\n      fps: 0,\n      rxSpeed: 0\n    }\n  });\n  useEffect(() => {\n    const fetchCameraDetails = async () => {\n      if (cameras[1].showModalSettings || cameras[2].showModalSettings) {\n        try {\n          const response = await axios.get(camServerURLs[1] + \"/get_all_camera_details\");\n          setAllCameras(response.data.data);\n        } catch (error) {\n          showToast(\"Error in fetching camera details\", \"error\");\n          showToast(error.message, \"error\");\n        }\n      }\n    };\n    fetchCameraDetails();\n  }, [cameras[1].showModalSettings, cameras[2].showModalSettings]);\n  useEffect(() => {\n    if (canvasRef.current) {\n      setCanvasSize({\n        width: canvasRef.current.offsetWidth,\n        height: canvasRef.current.offsetHeight\n      });\n    }\n  }, []);\n  const handleInputChange = (event, cameraId) => {\n    setCameras(prevCameras => ({\n      ...prevCameras,\n      [cameraId]: {\n        ...prevCameras[cameraId],\n        formValues: {\n          ...prevCameras[cameraId].formValues,\n          [event.target.name]: event.target.value\n        }\n      }\n    }));\n  };\n  useEffect(() => {\n    const updateCameraComment = cameraId => {\n      const selectedCamera = allCameras.find(camera => camera.camera_id === cameras[cameraId].formValues.camId);\n      if (!selectedCamera) return;\n      const isVirtual = !selectedCamera.details.is_real;\n      let comment = selectedCamera.details.comment;\n      comment = comment + \" | \" + (isVirtual ? \"Virtual Camera\" : \"Real Camera\");\n      setCameras(prevCameras => ({\n        ...prevCameras,\n        [cameraId]: {\n          ...prevCameras[cameraId],\n          comment: comment,\n          isVirtual: isVirtual\n        }\n      }));\n    };\n    updateCameraComment(1);\n    updateCameraComment(2);\n  }, [cameras[1].formValues.camId, cameras[2].formValues.camId, allCameras]);\n  const showToast = (msg, type, delay = 2000) => {\n    toast[type](msg, {\n      position: \"bottom-right\",\n      autoClose: delay,\n      hideProgressBar: false,\n      closeOnClick: true,\n      pauseOnHover: true,\n      draggable: true,\n      progress: undefined,\n      theme: \"dark\",\n      transition: Slide\n    });\n  };\n  const handlePreviewToggle = async cameraId => {\n    const isPreviewActive = cameras[cameraId].isPreviewActive;\n    setCameras(prevCameras => ({\n      ...prevCameras,\n      [cameraId]: {\n        ...prevCameras[cameraId],\n        isSwitchActive: false\n      }\n    }));\n    const action = isPreviewActive ? 'Shutting down' : 'Warming up';\n    let toastId = toast.loading(`${action} Cam ${cameraId} Server`, {\n      position: \"top-center\",\n      autoClose: 2000,\n      theme: \"dark\",\n      transition: Slide\n    });\n    try {\n      const endpoint = isPreviewActive ? 'stop_camera/' : `warmup/camserver/${cameraId}`;\n      const baseURL = isPreviewActive ? camServerURLs[cameraId] : mainServerURL; // Use main server for warming up\n      const response = await axios[isPreviewActive ? 'post' : 'get'](baseURL + endpoint);\n      setCameras(prevCameras => ({\n        ...prevCameras,\n        [cameraId]: {\n          ...prevCameras[cameraId],\n          isSwitchActive: true,\n          isPreviewActive: !isPreviewActive,\n          isStreaming: isPreviewActive ? false : prevCameras[cameraId].isStreaming\n        }\n      }));\n      toast.update(toastId, {\n        render: response.data.msg,\n        type: response.data.success ? \"success\" : \"error\",\n        isLoading: false,\n        autoClose: 2000\n      });\n    } catch (error) {\n      showToast(`Error in ${action.toLowerCase()} Cam Server ${cameraId}`, \"error\");\n      showToast(error.message, \"error\");\n    }\n  };\n  const handleStreamToggle = async cameraId => {\n    const isStreaming = cameras[cameraId].isStreaming;\n    setCameras(prevCameras => ({\n      ...prevCameras,\n      [cameraId]: {\n        ...prevCameras[cameraId],\n        isSwitchActive: false\n      }\n    }));\n    const action = isStreaming ? 'Stopping' : 'Starting';\n    let toastId = toast.loading(`${action} ${cameras[cameraId].formValues.camId}`, {\n      position: \"top-center\",\n      autoClose: 2000,\n      theme: \"dark\",\n      transition: Slide\n    });\n    try {\n      const endpoint = isStreaming ? 'stop_camera/' : 'start_camera/';\n      const data = isStreaming ? {} : {\n        camera_id: cameras[cameraId].formValues.camId,\n        fps: cameras[cameraId].formValues.targetFPS,\n        exposure_time: cameras[cameraId].formValues.exposureTime,\n        gain: cameras[cameraId].formValues.gain,\n        image_format: cameras[cameraId].formValues.imageFormat\n      };\n      const response = await axios.post(camServerURLs[cameraId] + `/${endpoint}`, data);\n      setCameras(prevCameras => ({\n        ...prevCameras,\n        [cameraId]: {\n          ...prevCameras[cameraId],\n          isSwitchActive: true,\n          isStreaming: !isStreaming\n        }\n      }));\n      toast.update(toastId, {\n        render: response.data.msg,\n        type: response.data.success ? \"success\" : \"error\",\n        isLoading: false,\n        autoClose: 2000\n      });\n    } catch (error) {\n      showToast(`Error in ${action.toLowerCase()} camera ${cameraId}`, \"error\");\n      showToast(error.message, \"error\");\n    }\n  };\n  useEffect(() => {\n    const connectToWebSocket = cameraId => {\n      if (!cameras[cameraId].isPreviewActive) return;\n      let frameCount = 0;\n      let dataCount = 0;\n      let firstImageReceived = false;\n      const ip = camServerURLs[cameraId].replace(/(^\\w+:|^)\\/\\//, '');\n      const websocket = new WebSocket(\"ws://\" + ip + \"/ws\");\n      websocket.binaryType = 'blob';\n      const updateFpsAndSpeed = () => {\n        setCameras(prevCameras => ({\n          ...prevCameras,\n          [cameraId]: {\n            ...prevCameras[cameraId],\n            fps: frameCount,\n            rxSpeed: dataCount / 1024\n          }\n        }));\n        frameCount = 0;\n        dataCount = 0;\n      };\n      const intervalId = setInterval(updateFpsAndSpeed, 1000);\n      const img = new Image();\n      img.onload = () => {\n        const canvas = canvasRef.current;\n        const ctx = canvas.getContext('2d');\n        if (!firstImageReceived) {\n          canvas.width = img.width;\n          canvas.height = img.height;\n          firstImageReceived = true;\n        }\n        ctx.drawImage(img, 0, 0, img.width, img.height, 0, 0, canvas.width, canvas.height);\n        URL.revokeObjectURL(img.src);\n      };\n      websocket.onmessage = event => {\n        const url = URL.createObjectURL(event.data);\n        img.src = url;\n        frameCount++;\n        dataCount += event.data.size;\n      };\n      websocket.onopen = () => console.log(`Connected to Cam Server ${cameraId}`);\n      websocket.onerror = error => console.error('WebSocket error:', error);\n      websocket.onclose = () => {\n        console.log(`Disconnected from Cam Server ${cameraId}`);\n        clearInterval(intervalId);\n      };\n      return () => {\n        websocket.close();\n        clearInterval(intervalId);\n      };\n    };\n    connectToWebSocket(1);\n    connectToWebSocket(2);\n  }, [cameras[1].isPreviewActive, cameras[2].isPreviewActive]);\n  const renderCameraControls = cameraId => {\n    const {\n      isPreviewActive,\n      isStreaming,\n      showModalSettings,\n      isSwitchActive,\n      formValues,\n      comment,\n      isVirtual,\n      fps,\n      rxSpeed\n    } = cameras[cameraId];\n    const handleModalToggle = () => setCameras(prevCameras => ({\n      ...prevCameras,\n      [cameraId]: {\n        ...prevCameras[cameraId],\n        showModalSettings: !prevCameras[cameraId].showModalSettings\n      }\n    }));\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-flex justify-content-center justify-content-center align-items-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"me-3 fs-4 fw-bold\",\n        style: {\n          color: !isSwitchActive ? 'gray' : 'inherit'\n        },\n        children: [\"Cam \", cameraId]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 309,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-check form-switch fs-5\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"form-check-input\",\n          type: \"checkbox\",\n          role: \"switch\",\n          disabled: !isSwitchActive,\n          checked: isPreviewActive,\n          onChange: () => handlePreviewToggle(cameraId)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 313,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex justify-content-center\",\n        style: {\n          marginLeft: '30px'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"btn-group\",\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            variant: \"primary\",\n            onClick: handleModalToggle,\n            disabled: !isPreviewActive || !isSwitchActive || isStreaming,\n            children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n              icon: faCog\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 327,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 326,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"primary\",\n            onClick: () => handleStreamToggle(cameraId),\n            disabled: !isPreviewActive || !isSwitchActive,\n            style: {\n              backgroundColor: isStreaming ? 'orange' : ''\n            },\n            children: isStreaming ? 'Stop Stream' : 'Start Stream'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 329,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 325,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 324,\n        columnNumber: 9\n      }, this), isStreaming && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex justify-content-center\",\n        style: {\n          marginLeft: '30px'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [\"FPS: \", fps.toFixed(2), \" | Rx Speed: \", (rxSpeed / 1024).toFixed(2), \" Mb/s\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 342,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 341,\n        columnNumber: 11\n      }, this)]\n    }, cameraId, true, {\n      fileName: _jsxFileName,\n      lineNumber: 308,\n      columnNumber: 7\n    }, this);\n  };\n  const renderCameraModal = cameraId => {\n    const {\n      showModalSettings,\n      formValues,\n      comment,\n      isVirtual\n    } = cameras[cameraId];\n    const handleCloseModal = () => setCameras(prevCameras => ({\n      ...prevCameras,\n      [cameraId]: {\n        ...prevCameras[cameraId],\n        showModalSettings: false\n      }\n    }));\n    return /*#__PURE__*/_jsxDEV(Modal, {\n      show: showModalSettings,\n      onHide: handleCloseModal,\n      children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n        closeButton: true,\n        children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n          children: [\"Cam Server \", cameraId, \" Configuration\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 362,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 361,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n        children: /*#__PURE__*/_jsxDEV(Form, {\n          children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n            className: \"mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"Camera ID\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 367,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Form.Select, {\n              name: \"camId\",\n              onChange: e => handleInputChange(e, cameraId),\n              value: formValues.camId,\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"Select Option\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 369,\n                columnNumber: 17\n              }, this), allCameras.map((camera, index) => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: camera.camera_id,\n                children: camera.camera_id\n              }, index, false, {\n                fileName: _jsxFileName,\n                lineNumber: 371,\n                columnNumber: 19\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 368,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Form.Text, {\n              className: \"text-muted\",\n              children: comment\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 376,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 366,\n            columnNumber: 13\n          }, this), isVirtual && /*#__PURE__*/_jsxDEV(Form.Group, {\n            className: \"mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"Folder Path\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 382,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              name: \"folderPath\",\n              placeholder: \"Enter folder path\",\n              onChange: e => handleInputChange(e, cameraId),\n              value: formValues.folderPath\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 383,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 381,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n            className: \"mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"Target Streaming FPS\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 387,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              name: \"targetFPS\",\n              type: \"number\",\n              placeholder: \"Enter FPS\",\n              onChange: e => handleInputChange(e, cameraId),\n              value: formValues.targetFPS\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 388,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 386,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n            className: \"mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"Exposure Time (ms)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 391,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              name: \"exposureTime\",\n              type: \"number\",\n              step: \"0.01\",\n              placeholder: \"Enter exposure time in ms\",\n              onChange: e => handleInputChange(e, cameraId),\n              value: formValues.exposureTime\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 392,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 390,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n            className: \"mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"Gain\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 403,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              name: \"gain\",\n              type: \"number\",\n              step: \"0.01\",\n              placeholder: \"Enter gain\",\n              onChange: e => handleInputChange(e, cameraId),\n              value: formValues.gain\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 404,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 402,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n            className: \"mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"Image Format\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 416,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Form.Select, {\n              name: \"imageFormat\",\n              onChange: e => handleInputChange(e, cameraId),\n              value: formValues.imageFormat,\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"compressed\",\n                children: \"Compressed\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 418,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"original\",\n                children: \"Original\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 419,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 417,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 415,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 365,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 364,\n        columnNumber: 9\n      }, this)]\n    }, cameraId, true, {\n      fileName: _jsxFileName,\n      lineNumber: 360,\n      columnNumber: 7\n    }, this);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-3\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-flex flex-row justify-content-between\",\n      children: [1, 2].map(cameraId => renderCameraControls(cameraId))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 430,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        width: '100%',\n        height: '100%',\n        marginTop: '20px'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"canvas\", {\n        ref: canvasRef,\n        style: {\n          width: '100%',\n          height: '100%',\n          backgroundColor: 'black'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 435,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 434,\n      columnNumber: 7\n    }, this), [1, 2].map(cameraId => renderCameraModal(cameraId)), /*#__PURE__*/_jsxDEV(ToastContainer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 440,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 429,\n    columnNumber: 5\n  }, this);\n}\n_s(CameraPreview, \"Kig+35zqS1Su4ZaM7nBuS+qbb3I=\");\n_c = CameraPreview;\nexport default CameraPreview;\nvar _c;\n$RefreshReg$(_c, \"CameraPreview\");","map":{"version":3,"names":["React","useState","useEffect","useRef","Modal","Button","Form","FontAwesomeIcon","faCog","ToastContainer","toast","Slide","axios","jsxDEV","_jsxDEV","mainServerURL","camServerURLs","CameraPreview","_s","allCameras","setAllCameras","canvasSize","setCanvasSize","width","height","canvasRef","cameras","setCameras","isPreviewActive","isStreaming","showModalSettings","isSwitchActive","formValues","camId","folderPath","targetFPS","imageFormat","exposureTime","gain","comment","isVirtual","fps","rxSpeed","fetchCameraDetails","response","get","data","error","showToast","message","current","offsetWidth","offsetHeight","handleInputChange","event","cameraId","prevCameras","target","name","value","updateCameraComment","selectedCamera","find","camera","camera_id","details","is_real","msg","type","delay","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","theme","transition","handlePreviewToggle","action","toastId","loading","endpoint","baseURL","update","render","success","isLoading","toLowerCase","handleStreamToggle","exposure_time","image_format","post","connectToWebSocket","frameCount","dataCount","firstImageReceived","ip","replace","websocket","WebSocket","binaryType","updateFpsAndSpeed","intervalId","setInterval","img","Image","onload","canvas","ctx","getContext","drawImage","URL","revokeObjectURL","src","onmessage","url","createObjectURL","size","onopen","console","log","onerror","onclose","clearInterval","close","renderCameraControls","handleModalToggle","className","children","style","color","fileName","_jsxFileName","lineNumber","columnNumber","role","disabled","checked","onChange","marginLeft","variant","onClick","icon","backgroundColor","toFixed","renderCameraModal","handleCloseModal","show","onHide","Header","closeButton","Title","Body","Group","Label","Select","e","map","index","Text","Control","placeholder","step","marginTop","ref","_c","$RefreshReg$"],"sources":["F:/tweezerui/src/components/CameraPreview/CameraPreview.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { Modal, Button, Form } from 'react-bootstrap';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faCog } from '@fortawesome/free-solid-svg-icons';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport { Slide } from 'react-toastify';\r\nimport axios from 'axios';\r\n\r\nconst mainServerURL = \"http://10.0.63.153:4000/\";\r\nconst camServerURLs = {\r\n  1: \"http://10.0.63.153:4001\",\r\n  2: \"http://10.0.63.153:4002\"\r\n};\r\n\r\nfunction CameraPreview() {\r\n  const [allCameras, setAllCameras] = useState([]);\r\n  const [canvasSize, setCanvasSize] = useState({ width: 0, height: 0 });\r\n  const canvasRef = useRef(null);\r\n\r\n  const [cameras, setCameras] = useState({\r\n    1: {\r\n      isPreviewActive: false,\r\n      isStreaming: false,\r\n      showModalSettings: false,\r\n      isSwitchActive: true,\r\n      formValues: {\r\n        camId: 'Select Option',\r\n        folderPath: 'F:/',\r\n        targetFPS: '10',\r\n        imageFormat: '',\r\n        exposureTime: \"10.0\",\r\n        gain: \"1.0\",\r\n      },\r\n      comment: \"Select the camera ID from the dropdown list\",\r\n      isVirtual: false,\r\n      fps: 0,\r\n      rxSpeed: 0,\r\n    },\r\n    2: {\r\n      isPreviewActive: false,\r\n      isStreaming: false,\r\n      showModalSettings: false,\r\n      isSwitchActive: true,\r\n      formValues: {\r\n        camId: 'Select Option',\r\n        folderPath: 'F:/',\r\n        targetFPS: '10',\r\n        imageFormat: '',\r\n        exposureTime: \"10.0\",\r\n        gain: \"1.0\",\r\n      },\r\n      comment: \"Select the camera ID from the dropdown list\",\r\n      isVirtual: false,\r\n      fps: 0,\r\n      rxSpeed: 0,\r\n    }\r\n  });\r\n\r\n  useEffect(() => {\r\n    const fetchCameraDetails = async () => {\r\n      if (cameras[1].showModalSettings || cameras[2].showModalSettings) {\r\n        try {\r\n          const response = await axios.get(camServerURLs[1] + \"/get_all_camera_details\");\r\n          setAllCameras(response.data.data);\r\n        } catch (error) {\r\n          showToast(\"Error in fetching camera details\", \"error\");\r\n          showToast(error.message, \"error\");\r\n        }\r\n      }\r\n    };\r\n\r\n    fetchCameraDetails();\r\n  }, [cameras[1].showModalSettings, cameras[2].showModalSettings]);\r\n\r\n  useEffect(() => {\r\n    if (canvasRef.current) {\r\n      setCanvasSize({\r\n        width: canvasRef.current.offsetWidth,\r\n        height: canvasRef.current.offsetHeight,\r\n      });\r\n    }\r\n  }, []);\r\n\r\n  const handleInputChange = (event, cameraId) => {\r\n    setCameras(prevCameras => ({\r\n      ...prevCameras,\r\n      [cameraId]: {\r\n        ...prevCameras[cameraId],\r\n        formValues: {\r\n          ...prevCameras[cameraId].formValues,\r\n          [event.target.name]: event.target.value,\r\n        },\r\n      }\r\n    }));\r\n  };\r\n\r\n  useEffect(() => {\r\n    const updateCameraComment = (cameraId) => {\r\n      const selectedCamera = allCameras.find((camera) => camera.camera_id === cameras[cameraId].formValues.camId);\r\n      if (!selectedCamera) return;\r\n\r\n      const isVirtual = !selectedCamera.details.is_real;\r\n      let comment = selectedCamera.details.comment;\r\n      comment = comment + \" | \" + (isVirtual ? \"Virtual Camera\" : \"Real Camera\");\r\n\r\n      setCameras(prevCameras => ({\r\n        ...prevCameras,\r\n        [cameraId]: {\r\n          ...prevCameras[cameraId],\r\n          comment: comment,\r\n          isVirtual: isVirtual,\r\n        }\r\n      }));\r\n    };\r\n\r\n    updateCameraComment(1);\r\n    updateCameraComment(2);\r\n  }, [cameras[1].formValues.camId, cameras[2].formValues.camId, allCameras]);\r\n\r\n  const showToast = (msg, type, delay = 2000) => {\r\n    toast[type](msg, {\r\n      position: \"bottom-right\",\r\n      autoClose: delay,\r\n      hideProgressBar: false,\r\n      closeOnClick: true,\r\n      pauseOnHover: true,\r\n      draggable: true,\r\n      progress: undefined,\r\n      theme: \"dark\",\r\n      transition: Slide,\r\n    });\r\n  };\r\n\r\n  const handlePreviewToggle = async (cameraId) => {\r\n    const isPreviewActive = cameras[cameraId].isPreviewActive;\r\n    setCameras(prevCameras => ({\r\n      ...prevCameras,\r\n      [cameraId]: {\r\n        ...prevCameras[cameraId],\r\n        isSwitchActive: false,\r\n      }\r\n    }));\r\n\r\n    const action = isPreviewActive ? 'Shutting down' : 'Warming up';\r\n    let toastId = toast.loading(`${action} Cam ${cameraId} Server`, {\r\n      position: \"top-center\",\r\n      autoClose: 2000,\r\n      theme: \"dark\",\r\n      transition: Slide,\r\n    });\r\n\r\n    try {\r\n      const endpoint = isPreviewActive ? 'stop_camera/' : `warmup/camserver/${cameraId}`;\r\n      const baseURL = isPreviewActive ? camServerURLs[cameraId] : mainServerURL; // Use main server for warming up\r\n      const response = await axios[isPreviewActive ? 'post' : 'get'](baseURL + endpoint);\r\n\r\n      setCameras(prevCameras => ({\r\n        ...prevCameras,\r\n        [cameraId]: {\r\n          ...prevCameras[cameraId],\r\n          isSwitchActive: true,\r\n          isPreviewActive: !isPreviewActive,\r\n          isStreaming: isPreviewActive ? false : prevCameras[cameraId].isStreaming, \r\n        }\r\n      }));\r\n\r\n      toast.update(toastId, {\r\n        render: response.data.msg,\r\n        type: response.data.success ? \"success\" : \"error\",\r\n        isLoading: false,\r\n        autoClose: 2000,\r\n      });\r\n    } catch (error) {\r\n      showToast(`Error in ${action.toLowerCase()} Cam Server ${cameraId}`, \"error\");\r\n      showToast(error.message, \"error\");\r\n    }\r\n  };\r\n\r\n  const handleStreamToggle = async (cameraId) => {\r\n    const isStreaming = cameras[cameraId].isStreaming;\r\n    setCameras(prevCameras => ({\r\n      ...prevCameras,\r\n      [cameraId]: {\r\n        ...prevCameras[cameraId],\r\n        isSwitchActive: false,\r\n      }\r\n    }));\r\n\r\n    const action = isStreaming ? 'Stopping' : 'Starting';\r\n    let toastId = toast.loading(`${action} ${cameras[cameraId].formValues.camId}`, {\r\n      position: \"top-center\",\r\n      autoClose: 2000,\r\n      theme: \"dark\",\r\n      transition: Slide,\r\n    });\r\n\r\n    try {\r\n      const endpoint = isStreaming ? 'stop_camera/' : 'start_camera/';\r\n      const data = isStreaming ? {} : {\r\n        camera_id: cameras[cameraId].formValues.camId,\r\n        fps: cameras[cameraId].formValues.targetFPS,\r\n        exposure_time: cameras[cameraId].formValues.exposureTime,\r\n        gain: cameras[cameraId].formValues.gain,\r\n        image_format: cameras[cameraId].formValues.imageFormat,\r\n      };\r\n\r\n      const response = await axios.post(camServerURLs[cameraId] + `/${endpoint}`, data);\r\n\r\n      setCameras(prevCameras => ({\r\n        ...prevCameras,\r\n        [cameraId]: {\r\n          ...prevCameras[cameraId],\r\n          isSwitchActive: true,\r\n          isStreaming: !isStreaming,\r\n        }\r\n      }));\r\n\r\n      toast.update(toastId, {\r\n        render: response.data.msg,\r\n        type: response.data.success ? \"success\" : \"error\",\r\n        isLoading: false,\r\n        autoClose: 2000,\r\n      });\r\n    } catch (error) {\r\n      showToast(`Error in ${action.toLowerCase()} camera ${cameraId}`, \"error\");\r\n      showToast(error.message, \"error\");\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const connectToWebSocket = (cameraId) => {\r\n      if (!cameras[cameraId].isPreviewActive) return;\r\n\r\n      let frameCount = 0;\r\n      let dataCount = 0;\r\n      let firstImageReceived = false;\r\n\r\n      const ip = camServerURLs[cameraId].replace(/(^\\w+:|^)\\/\\//, '');\r\n      const websocket = new WebSocket(\"ws://\" + ip + \"/ws\");\r\n      websocket.binaryType = 'blob';\r\n\r\n      const updateFpsAndSpeed = () => {\r\n        setCameras(prevCameras => ({\r\n          ...prevCameras,\r\n          [cameraId]: {\r\n            ...prevCameras[cameraId],\r\n            fps: frameCount,\r\n            rxSpeed: dataCount / 1024,\r\n          }\r\n        }));\r\n        frameCount = 0;\r\n        dataCount = 0;\r\n      };\r\n\r\n      const intervalId = setInterval(updateFpsAndSpeed, 1000);\r\n\r\n      const img = new Image();\r\n      img.onload = () => {\r\n        const canvas = canvasRef.current;\r\n        const ctx = canvas.getContext('2d');\r\n        if (!firstImageReceived) {\r\n          canvas.width = img.width;\r\n          canvas.height = img.height;\r\n          firstImageReceived = true;\r\n        }\r\n        ctx.drawImage(img, 0, 0, img.width, img.height, 0, 0, canvas.width, canvas.height);\r\n        URL.revokeObjectURL(img.src);\r\n      };\r\n\r\n      websocket.onmessage = (event) => {\r\n        const url = URL.createObjectURL(event.data);\r\n        img.src = url;\r\n        frameCount++;\r\n        dataCount += event.data.size;\r\n      };\r\n\r\n      websocket.onopen = () => console.log(`Connected to Cam Server ${cameraId}`);\r\n      websocket.onerror = (error) => console.error('WebSocket error:', error);\r\n      websocket.onclose = () => {\r\n        console.log(`Disconnected from Cam Server ${cameraId}`);\r\n        clearInterval(intervalId);\r\n      };\r\n\r\n      return () => {\r\n        websocket.close();\r\n        clearInterval(intervalId);\r\n      };\r\n    };\r\n\r\n    connectToWebSocket(1); \r\n    connectToWebSocket(2); \r\n\r\n  }, [cameras[1].isPreviewActive, cameras[2].isPreviewActive]); \r\n\r\n  const renderCameraControls = (cameraId) => {\r\n    const { isPreviewActive, isStreaming, showModalSettings, isSwitchActive, formValues, comment, isVirtual, fps, rxSpeed } = cameras[cameraId];\r\n    const handleModalToggle = () => setCameras(prevCameras => ({\r\n      ...prevCameras,\r\n      [cameraId]: {\r\n        ...prevCameras[cameraId],\r\n        showModalSettings: !prevCameras[cameraId].showModalSettings,\r\n      }\r\n    }));\r\n\r\n    return (\r\n      <div className=\"d-flex justify-content-center justify-content-center align-items-center\" key={cameraId}>\r\n        <span className=\"me-3 fs-4 fw-bold\" style={{ color: !isSwitchActive ? 'gray' : 'inherit' }}>\r\n          Cam {cameraId}\r\n        </span>\r\n\r\n        <div className=\"form-check form-switch fs-5\">\r\n          <input\r\n            className=\"form-check-input\"\r\n            type=\"checkbox\"\r\n            role=\"switch\"\r\n            disabled={!isSwitchActive}\r\n            checked={isPreviewActive}\r\n            onChange={() => handlePreviewToggle(cameraId)}\r\n          />\r\n        </div>\r\n\r\n        <div className=\"d-flex justify-content-center\" style={{ marginLeft: '30px' }}>\r\n          <div className=\"btn-group\">\r\n            <Button variant=\"primary\" onClick={handleModalToggle} disabled={!isPreviewActive || !isSwitchActive || isStreaming}>\r\n              <FontAwesomeIcon icon={faCog} />\r\n            </Button>\r\n            <Button\r\n              variant=\"primary\"\r\n              onClick={() => handleStreamToggle(cameraId)}\r\n              disabled={!isPreviewActive || !isSwitchActive}\r\n              style={{ backgroundColor: isStreaming ? 'orange' : '' }}\r\n            >\r\n              {isStreaming ? 'Stop Stream' : 'Start Stream'}\r\n            </Button>\r\n          </div>\r\n        </div>\r\n\r\n        {isStreaming && (\r\n          <div className=\"d-flex justify-content-center\" style={{ marginLeft: '30px' }}>\r\n            <div>FPS: {fps.toFixed(2)} | Rx Speed: {(rxSpeed / 1024).toFixed(2)} Mb/s</div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const renderCameraModal = (cameraId) => {\r\n    const { showModalSettings, formValues, comment, isVirtual } = cameras[cameraId];\r\n    const handleCloseModal = () => setCameras(prevCameras => ({\r\n      ...prevCameras,\r\n      [cameraId]: {\r\n        ...prevCameras[cameraId],\r\n        showModalSettings: false,\r\n      }\r\n    }));\r\n\r\n    return (\r\n      <Modal show={showModalSettings} onHide={handleCloseModal} key={cameraId}>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>Cam Server {cameraId} Configuration</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n          <Form>\r\n            <Form.Group className=\"mb-3\">\r\n              <Form.Label>Camera ID</Form.Label>\r\n              <Form.Select name=\"camId\" onChange={(e) => handleInputChange(e, cameraId)} value={formValues.camId}>\r\n                <option value=\"\">Select Option</option>\r\n                {allCameras.map((camera, index) => (\r\n                  <option key={index} value={camera.camera_id}>\r\n                    {camera.camera_id}\r\n                  </option>\r\n                ))}\r\n              </Form.Select>\r\n              <Form.Text className=\"text-muted\">\r\n                {comment}\r\n              </Form.Text>\r\n            </Form.Group>\r\n            {isVirtual && (\r\n              <Form.Group className=\"mb-3\">\r\n                <Form.Label>Folder Path</Form.Label>\r\n                <Form.Control name=\"folderPath\" placeholder=\"Enter folder path\" onChange={(e) => handleInputChange(e, cameraId)} value={formValues.folderPath} />\r\n              </Form.Group>\r\n            )}\r\n            <Form.Group className=\"mb-3\">\r\n              <Form.Label>Target Streaming FPS</Form.Label>\r\n              <Form.Control name=\"targetFPS\" type=\"number\" placeholder=\"Enter FPS\" onChange={(e) => handleInputChange(e, cameraId)} value={formValues.targetFPS} />\r\n            </Form.Group>\r\n            <Form.Group className=\"mb-3\">\r\n              <Form.Label>Exposure Time (ms)</Form.Label>\r\n              <Form.Control\r\n                name=\"exposureTime\"\r\n                type=\"number\"\r\n                step=\"0.01\"\r\n                placeholder=\"Enter exposure time in ms\"\r\n                onChange={(e) => handleInputChange(e, cameraId)}\r\n                value={formValues.exposureTime}\r\n              />\r\n            </Form.Group>\r\n\r\n            <Form.Group className=\"mb-3\">\r\n              <Form.Label>Gain</Form.Label>\r\n              <Form.Control\r\n                name=\"gain\"\r\n                type=\"number\"\r\n                step=\"0.01\"\r\n                placeholder=\"Enter gain\"\r\n                onChange={(e) => handleInputChange(e, cameraId)}\r\n                value={formValues.gain}\r\n              />\r\n            </Form.Group>\r\n\r\n\r\n            <Form.Group className=\"mb-3\">\r\n              <Form.Label>Image Format</Form.Label>\r\n              <Form.Select name=\"imageFormat\" onChange={(e) => handleInputChange(e, cameraId)} value={formValues.imageFormat}>\r\n                <option value=\"compressed\">Compressed</option>\r\n                <option value=\"original\">Original</option>\r\n              </Form.Select>\r\n            </Form.Group>\r\n          </Form>\r\n        </Modal.Body>\r\n      </Modal>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-3\">\r\n      <div className=\"d-flex flex-row justify-content-between\">\r\n        {[1, 2].map(cameraId => renderCameraControls(cameraId))}\r\n      </div>\r\n\r\n      <div style={{ width: '100%', height: '100%', marginTop: '20px' }}>\r\n        <canvas ref={canvasRef} style={{ width: '100%', height: '100%', backgroundColor: 'black' }}></canvas>\r\n      </div>\r\n\r\n      {[1, 2].map(cameraId => renderCameraModal(cameraId))}\r\n\r\n      <ToastContainer />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default CameraPreview;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}